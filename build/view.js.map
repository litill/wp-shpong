{"version":3,"file":"view.js","mappings":"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","sources":["webpack://wp-shpong/./src/game/AI.js","webpack://wp-shpong/./src/game/Ball.js","webpack://wp-shpong/./src/game/Collisions.js","webpack://wp-shpong/./src/game/HumanInput.js","webpack://wp-shpong/./src/game/NullInput.js","webpack://wp-shpong/./src/game/Player.js","webpack://wp-shpong/./node_modules/gamepad.js/gamepad.js","webpack://wp-shpong/./src/game/game-style.css","webpack://wp-shpong/webpack/bootstrap","webpack://wp-shpong/webpack/runtime/compat get default export","webpack://wp-shpong/webpack/runtime/define property getters","webpack://wp-shpong/webpack/runtime/hasOwnProperty shorthand","webpack://wp-shpong/webpack/runtime/make namespace object","webpack://wp-shpong/./src/view.js"],"sourcesContent":["import { GetAngleBallToPlayer } from './Collisions';\n\nexport default class AI {\n\n    constructor( player_ref, balls, goals ) {\n        this.player_ref = player_ref;\n        this.active = true;\n        this.balls = balls;\n        this.goals = goals;\n        this.current_target = null;\n        this.current_target_distance = 0;\n        this.current_target_angle = 0;\n        this.wanted_velocity = 0.0;\n        this.projected_fall_coords = { x: 0, y: 0 };\n    }\n\n    Activate() {\n        this.active = true;\n    }\n\n    Deactivate() {\n        this.active = false;\n    }\n\n    Toggle() {\n        this.active = ! this.active;\n    }\n\n    Work( dt, et ) {\n        if ( this.active ) {\n            this.FindNearestTarget();\n            this.SetControlsToTarget();\n        }\n    }\n\n    SetControlsToTarget() {\n        if ( !this.current_target ) {\n            return;\n        }\n\n        this.current_target_angle = GetAngleBallToPlayer( this.current_target, this.player_ref );\n        this.wanted_velocity = Math.cos( this.current_target_angle );\n\n        if ( Math.abs( this.wanted_velocity ) > 0.44 ) {\n            // this.player_ref.velocity = this.wanted_velocity;\n            if ( Math.sign( this.wanted_velocity ) < 0 ) {\n                this.player_ref.input.UnsetRight();\n                this.player_ref.input.SetLeft();\n            } else {\n                this.player_ref.input.UnsetLeft();\n                this.player_ref.input.SetRight();\n            }\n        } else {\n            // this.player_ref.velocity = 0;\n            this.player_ref.input.UnsetLeft();\n            this.player_ref.input.UnsetRight();\n        }\n    }\n\n    FindNearestTarget() {\n        if ( ! this.balls.length ) {\n            return;\n        }\n\n        this.current_target_distance = 9999999;\n        let target_index = 0;\n\t\tlet ball_from_center = 0;\n\n        for ( let i = 0; i < this.balls.length; i++ ) {\n            const dist = this.GetBallDistance( this.balls[i] );\n            const intersect = this.IsBallIntersectingTopWall( this.balls[i] );\n            // console.log(intersect);\n\n            if ( intersect.intersects === true ) {\n                this.player_ref.SetDebug( intersect.x, intersect.y );\n            }\n\n            if ( dist < this.current_target_distance && this.balls[i].velocity.y < 0) {\n\t\t\t\tball_from_center = this.player_ref.scr.h / 2 - this.balls[i].position.y;\n\t\t\t\tthis.current_target_distance = dist;\n\t\t\t\ttarget_index = i;\n            }\n        }\n\n        this.MaybeChangeTarget( this.balls[target_index], ball_from_center );\n    }\n\n    SetTargetToNone() {\n        this.current_target = null;\n    }\n\n    MaybeChangeTarget( ball, ball_from_center ) {\n\n        if ( this.current_target !== ball ) {\n            this.current_target = ball;\n        }\n    }\n\n    GetBallDistance( ball ) {\n        return Math.sqrt(\n            Math.pow( ball.position.x - this.player_ref.center.x, 2 ) +\n            Math.pow( ball.position.y, 2 )\n        );\n    }\n\n    IsBallIntersectingTopWall( ball, wall ) {\n        const x1 = 0;\n        const y1 = 0;\n        const x2 = 639;\n        const y2 = 0;\n        const x3 = ball.position.x + ball.size.w / 2;\n        const y3 = ball.position.y - ball.size.h / 2;\n        const x4 = ball.position.x - ball.velocity.x + ball.size.w / 2;\n        const y4 = ball.position.y - ball.velocity.y - ball.size.h / 2;\n        const denom = ( x1 - x2 ) * ( y3 - y4 ) - ( y1 - y2 ) * ( x3 - x4 );\n        if ( denom == 0 ) {\n            return {\n                intersects: false,\n                x: null,\n                y: null,\n            };\n        }\n        const t = ( ( x1 - x3 ) * ( y3 - y4 ) - ( y1 - y3 ) * ( x3 - x4 ) ) / denom;\n        const u = -1 * ( ( x1 - x3 ) * ( y1 - y2 ) - ( y1 - y3 ) * ( x1 - x2 ) ) / denom;\n\n        if ( t > 0 && t < 1 && u > 0 ) {\n            return {\n                intersects: true,\n                x: x1 + t * ( x2 - x1 ),\n                y: y1 + t * ( y2 - y1 ),\n            };\n        }\n\n        return {\n            intersects: false,\n            x: null,\n            y: null,\n        };\n    }\n\n}\n","import { GetPointAngleToScreenCenter } from './Collisions';\n\nexport default class Ball {\n    constructor( screen, color, size, move_speed, sprite, goals ) {\n        this.scr = screen;\n        this.position = { x: 0, y: 0 };\n        this.shadow_center = {x: 0, y: 0};\n        this.center = { x: 0, y: 0 };\n        this.size = size || { w: 16, h: 16 };\n        this.color = color;\n        this.velocity = { x: 0, y: 0 };\n        this.move_speed = move_speed;\n\t\tthis.sprite = sprite;\n\t\tthis.goals = goals;\n\n        this.CalcPosition = this.CalcPosition.bind(this);\n\n        this.SetInitialPosition();\n        this.SetInitialVelocity();\n    }\n\n    SetInitialPosition() {\n        this.position.x = this.scr.w / 2 - this.size.w / 2;\n        this.position.y = this.scr.h / 2 - this.size.h / 2;\n    }\n\n    SetInitialVelocity() {\n        this.velocity.y = this.GetRandomVelocity(); // this.GetRandomVelocity();\n        this.velocity.x = this.GetRandomVelocity();\n    }\n\n    GetRandomVelocity() {\n        let min = -1;\n        let max = 1;\n\n        let velocity = Math.random() * (max - min + 1) + min;\n\n        while (velocity === 0) {\n            velocity = Math.random() * (max - min + 1) + min;\n        }\n\n        if (Math.abs(velocity) < 0.4) {\n            velocity = Math.sign( velocity ) * 0.4;\n        }\n\n        if (Math.abs(velocity) > 0.8) {\n            velocity = Math.sign( velocity ) * 0.8;\n        }\n\n        return velocity;\n    }\n\n    Update(dt, et) {\n        this.CalcPosition(dt, et);\n        this.UpdateCenter();\n    }\n\n    UpdateCenter() {\n        this.center.x = this.position.x + this.size.w / 2;\n        this.center.y = this.position.y + this.size.h / 2;\n\n        const angle_ball_to_center = GetPointAngleToScreenCenter( this.center.x, this.center.y, this.scr );\n        this.shadow_center.x = this.center.x + ( Math.cos(angle_ball_to_center) * 10);\n        this.shadow_center.y = this.center.y + ( Math.sin(angle_ball_to_center) * 10);\n    }\n\n    CalcPosition(dt, et) {\n        this.position.x = this.position.x + this.velocity.x * dt * this.move_speed;\n        this.position.y = this.position.y + this.velocity.y * dt * this.move_speed;\n    }\n\n    Draw() {\n\n        this.scr.ctx.save();\n\n        this.scr.ctx.beginPath();\n        this.scr.ctx.arc( this.shadow_center.x, this.shadow_center.y, ( this.size.w / 2 ), 0, 2 * Math.PI, false );\n        this.scr.ctx.fillStyle = 'rgba(100, 100, 100, 0.23)';\n        this.scr.ctx.fill();\n        this.scr.ctx.closePath();\n\n        this.scr.ctx.beginPath();\n        this.scr.ctx.arc( this.center.x, this.center.y, this.size.w / 2, 0, 2 * Math.PI, false );\n        this.scr.ctx.fillStyle = this.sprite.pattern;\n        this.scr.ctx.fill();\n        this.scr.ctx.closePath();\n\n        this.scr.ctx.restore();\n    }\n\n}\n","const Deg2Rad = ( degrees ) => {\n    return degrees * ( Math.PI / 180 );\n}\n\nconst Rad2Deg = (rad) => {\n    return rad * ( 180 / Math.PI );\n}\n\n/**\n * Get angle from ball to screen center\n */\nexport const GetPointAngleToScreenCenter = ( x, y, scr ) => {\n    return Math.atan2(\n        y - scr.h / 2,\n        x - scr.w / 2\n    );\n}\n\n/**\n * Get angle from ball to player's paddle\n */\nexport const GetAngleBallToPlayer = ( ball, player ) => {\n    return Math.atan2(\n        ball.center.y - player.center.y,\n        ball.center.x - ( player.center.x )\n    );\n}\n\n/**\n * Check collision between a ball and Left/Right wall\n */\nconst CheckCollisionWalls = ( ball, scr ) => {\n    if ( ball.position.x < 16 || ball.position.x > scr.w - ball.size.w - 1 - 16 ) {\n        ball.velocity.x = -1 * ball.velocity.x;\n\n        if ( ball.position.x < 16 ) {\n            ball.position.x = 16;\n        }\n\n        if ( ball.position.x > scr.w - ball.size.w - 1 - 16 ) {\n            ball.position.x = scr.w - 1 - ball.size.w - 16;\n        }\n    }\n}\n\n/**\n * Checks if a ball fell off the playfield (top / bottom wall)\n */\nconst CheckCollisionOut = ( ball, scr, players ) => {\n    /**\n     * Top wall\n     **/\n    if ( ball.position.y < 32) {\n\t\tplayers[0].AddPoint();\n        ball.SetInitialPosition();\n        ball.SetInitialVelocity();\n    }\n\n    /**\n     * Bottom wall\n     **/\n    if ( ball.position.y > scr.h - ball.size.h - 1 - 32 ) {\n\t\tplayers[1].AddPoint();\n        ball.SetInitialPosition();\n        ball.SetInitialVelocity();\n    }\n}\n\n\nconst CheckCollisionPlayerTop = ( ball, player ) => {\n    if ( DidHitThePlayerTop( ball, player ) ) {\n        ball.velocity.y = -1 * ball.velocity.y;\n        ball.position.y = ball.position.y + 1;\n        const angle_part = Math.cos( GetAngleBallToPlayer( ball, player ) ) * 0.3;\n        const player_velocity_part = player.velocity * 0.7;\n        ball.velocity.x = angle_part + player_velocity_part;\n    }\n}\n\nconst CheckCollisionPlayerBottom = ( ball, player ) => {\n    if ( DidHitThePlayerBottom( ball, player ) ) {\n        ball.velocity.y = -1 * ball.velocity.y;\n        ball.position.y = ball.position.y - 1;\n        // ball.position.y = player.position.y -  ball.size.h - 1;\n        const angle_part_x = Math.cos( GetAngleBallToPlayer( ball, player ) ) * 0.3;\n        const player_velocity_part = player.velocity * 0.7;\n        ball.velocity.x = angle_part_x + player_velocity_part;\n    }\n}\n\nconst DidHitThePlayerBottom = ( ball, player ) => {\n    return ball.velocity.y > 0 && ball.position.x >= player.position.x &&\n        ball.position.x + ball.size.w <= player.position.x + player.size.w &&\n        ball.position.y + ball.size.h >= player.position.y;\n}\n\nconst DidHitThePlayerTop = ( ball, player ) => {\n    return ball.position.x >= player.position.x &&\n        ball.position.x + ball.size.w <= player.position.x + player.size.w &&\n        ball.position.y < player.position.y + player.size.h;\n}\n\nconst CheckCollisionPlayers = ( ball, players ) => {\n    players.forEach( ( player ) => {\n        if ( player.position_name === \"bottom\" ) {\n            CheckCollisionPlayerBottom ( ball, player );\n        }\n\n        if ( player.position_name === \"top\" ) {\n            CheckCollisionPlayerTop( ball, player );\n        }\n    });\n}\n\nexport const WillBallCollideWithWall = ( ball ) => {\n    if ( ball.velocity.y >= 0) {\n        return {\n            collision: false,\n            x: null,\n            y: null,\n        };\n    }\n    const x1 = 0;\n    const y1 = 0;\n    const x2 = 639;\n    const y2 = 0;\n    const x3 = ball.position.x + ball.size.w / 2;\n    const y3 = ball.position.y - ball.size.h / 2;\n    const x4 = ball.position.x - ball.velocity.x + ball.size.w / 2;\n    const y4 = ball.position.y - ball.velocity.y - ball.size.h / 2;\n    const denom = ( x1 - x2 ) * ( y3 - y4 ) - ( y1 - y2 ) * ( x3 - x4 );\n    if ( denom === 0 ) {\n        return {\n            collision: false,\n            x: null,\n            y: null,\n        };\n    }\n    const t = ( ( x1 - x3 ) * ( y3 - y4 ) - ( y1 - y3 ) * ( x3 - x4 ) ) / denom;\n    const u = -1 * ( ( x1 - x3 ) * ( y1 - y2 ) - ( y1 - y3 ) * ( x1 - x2 ) ) / denom;\n\n    if ( t > 0 && t < 1 && u > 0 ) {\n        return {\n            collision: true,\n            x: x1 + t * ( x2 - x1 ),\n            y: y1 + t * ( y2 - y1 ),\n        };\n    }\n\n    return {\n        collision: false,\n        x: null,\n        y: null,\n    };\n}\n\nexport const CheckCollisions = ( ball, players, scr, dt ) => {\n\tCheckCollisionOut( ball, scr, players );\n\tCheckCollisionWalls( ball, scr );\n\tCheckCollisionPlayers( ball, players );\n};\n","import { GamepadListener } from 'gamepad.js';\n\nconst DEFAULT_GAMEPAD_MAPPING = new Map();\nDEFAULT_GAMEPAD_MAPPING.set( 'left', 14 );\nDEFAULT_GAMEPAD_MAPPING.set( 'right', 15 );\n\nexport default class HumanInput {\n\n    constructor( controller = 'keyboard' ) {\n        this.perf = window.performance;\n        this.controller = controller;\n        this.joypad = null;\n        this.keys = {\n            left: {\n                pressed: false,\n                time: 0\n            },\n            right: {\n                pressed: false,\n                time: 0\n            }\n        };\n\n        this.HandleJoyPadEvent = this.HandleJoyPadEvent.bind(this);\n\n        this.AttachMove();\n    }\n\n    AttachMove() {\n        switch ( this.controller ) {\n            case 'keyboard':\n                this.AttachKeyBoardControls();\n                break;\n            case 'joypad':\n                this.AttachJoypadControls();\n                break;\n        }\n    }\n\n    AttachJoypadControls() {\n        this.joypad = new GamepadListener({\n            analog: false,\n        });\n\n        this.joypad.start();\n\n        this.joypad.on( 'gamepad:button', this.HandleJoyPadEvent );\n    }\n\n    HandleJoyPadEvent(e) {\n        switch ( e.detail.button ) {\n            case DEFAULT_GAMEPAD_MAPPING.get('left'):\n                if ( e.detail.pressed ) {\n                    this.SetLeft();\n                } else {\n                    this.UnsetLeft();\n                }\n                break;\n            case DEFAULT_GAMEPAD_MAPPING.get('right'):\n                if ( e.detail.pressed ) {\n                    this.SetRight();\n                } else {\n                    this.UnsetRight();\n                }\n                break;\n        }\n    }\n\n    AttachKeyBoardControls() {\n        document.addEventListener(\"keydown\", (e) => {\n            switch (e.code) {\n                case \"ArrowLeft\":\n                    this.SetLeft();\n                    break;\n                case \"ArrowRight\":\n                    this.SetRight();\n                    break;\n                default:\n            }\n        });\n\n        document.addEventListener(\"keyup\", (e) => {\n            switch (e.code) {\n                case \"ArrowLeft\":\n                    this.UnsetLeft();\n                    break;\n                case \"ArrowRight\":\n                    this.UnsetRight();\n                    break;\n                default:\n            }\n        });\n    }\n\n    SetLeft() {\n        this.keys.left = {\n            pressed : true,\n            time: this.perf.now()\n        };\n    }\n\n    UnsetLeft() {\n        this.keys.left = {\n            pressed : false,\n            time: 0\n        };\n    }\n\n    SetRight() {\n        this.keys.right = {\n            pressed : true,\n            time: this.perf.now()\n        };\n    }\n\n    UnsetRight() {\n        this.keys.right = {\n            pressed : false,\n            time: 0\n        };\n    }\n\n    PressingLeft() {\n        return this.keys.left.pressed && this.keys.left.time > this.keys.right.time;\n    }\n\n    PressingRight() {\n        return (\n            this.keys.right.pressed && this.keys.right.time > this.keys.left.time\n        );\n    }\n}\n","export default class NullInput {\n    constructor() {\n        this.perf = window.performance;\n        this.keys = {\n            left: {\n                pressed: false,\n                time: 0\n            },\n            right: {\n                pressed: false,\n                time: 0\n            }\n        };\n    }\n\n    SetLeft() {\n        this.keys.left = {\n            pressed : true,\n            time: this.perf.now()\n        };\n    }\n\n    UnsetLeft() {\n        this.keys.left = {\n            pressed : false,\n            time: 0\n        };\n    }\n\n    SetRight() {\n        this.keys.right = {\n            pressed : true,\n            time: this.perf.now()\n        };\n    }\n\n    UnsetRight() {\n        this.keys.right = {\n            pressed : false,\n            time: 0\n        };\n    }\n\n    PressingLeft() {\n        return this.keys.left.pressed && this.keys.left.time > this.keys.right.time;\n    }\n\n    PressingRight() {\n        return (\n            this.keys.right.pressed && this.keys.right.time > this.keys.left.time\n        );\n    }\n}\n","export default class Player {\n    constructor( name, color, screen, position_name, input, size, move_speed, sprite ) {\n        this.name = name;\n        this.color = color;\n        this.scr = screen;\n        this.input = input;\n        this.position = { x: 0, y: 0 };\n        this.size = size || { w: 100, h: 20};\n        this.center = { x: 0, y: 0 };\n        this.velocity = 0.0;\n        this.position_name = position_name;\n        this.position_sign = 0;\n        this.points = 0;\n        this.debug = { x: 0, y: 0 };\n\t\tthis.move_speed = move_speed;\n\t\tthis.sprite = sprite;\n\t\tthis.paddle_shift_y = 32;\n        this.SetInitialPosition( position_name );\n\n        this.SetDebug = this.SetDebug.bind(this);\n    }\n\n    Update(dt, et) {\n        this.position.x += this.velocity * dt * this.move_speed;\n\n        if (this.position.x < 16) {\n            this.position.x = 16;\n        } else if (this.position.x + this.size.w > this.scr.w - 1 - 16) {\n            this.position.x = this.scr.w - 1 - this.size.w - 16;\n        }\n\n        this.UpdateCenter();\n    }\n\n    SetDebug( x, y ) {\n        // console.log(\"X: \", x, \" Y: \", y);\n        this.debug.x = x;\n        this.debug.y = y;\n    }\n\n    Draw() {\n\n\t\tthis.scr.ctx.drawImage( this.sprite.bitmap, this.position.x, this.position.y, this.size.w, this.size.h );\n\n\t\t/** Debug where the ball should fall */\n\t\t// if ( this.position_name == 'top' ) {\n            // this.scr.ctx.save();\n            // this.scr.ctx.beginPath();\n            // this.scr.ctx.arc( this.debug.x, this.debug.y, 10, 0, 2 * Math.PI, false );\n            // this.scr.ctx.closePath();\n            // this.scr.ctx.fillStyle = 'red';\n            // this.scr.ctx.fill();\n            // this.scr.ctx.restore();\n        // }\n    }\n\n    UpdateCenter() {\n        this.center.x = this.position.x + this.size.w / 2;\n        this.center.y = this.position.y + this.size.h * this.position_sign;\n    }\n\n    AddPoint() {\n        this.points++;\n\t\tconsole.log(this.points);\n    }\n\n    HandleInput( dt, et ) {\n        if ( this.input.PressingLeft() ) {\n            this.velocity = -1.5;\n        } else if ( this.input.PressingRight() ) {\n            this.velocity = 1.5;\n        } else {\n            this.velocity = 0;\n        }\n    }\n\n    SetInitialPosition(pos) {\n        switch (pos) {\n            case \"top\":\n                this.position.y = this.paddle_shift_y;\n                this.position.x = this.scr.w / 2 - this.size.w / 2;\n                this.position_sign = 1;\n                break;\n\n            case \"bottom\":\n                this.position.y = this.scr.h - this.size.h - this.paddle_shift_y - 1;\n                this.position.x = this.scr.w / 2 - this.size.w / 2;\n                this.position_sign = -1;\n                break;\n            default:\n        }\n    }\n}\n","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.gamepad=e():t.gamepad=e()}(this,(function(){return(()=>{var t={944:function(t){t.exports=(()=>{\"use strict\";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};function n(t){return(n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function r(t,e){var n=\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&\"number\"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var a,u=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){s=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&(\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"]);if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,e)||i(t,e)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function i(t,e){if(t){if(\"string\"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return\"Object\"===n&&t.constructor&&(n=t.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(t):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}t.d(e,{default:()=>s});var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];u(this,t),this.allowExtra=e,this.defaults=new Map,this.types=new Map,this.optional=new Set,this.required=new Set}var e;return(e=[{key:\"setDefaults\",value:function(t){var e=this;return Object.entries(t).forEach((function(t){var n=o(t,2),r=n[0],i=n[1];return e.defaults.set(r,i)})),this}},{key:\"setTypes\",value:function(t){var e=this;return Object.entries(t).forEach((function(t){var n=o(t,2),r=n[0],i=n[1];return e.types.set(r,i)})),this}},{key:\"setOptional\",value:function(t){var e=this;return t.forEach((function(t){return e.optional.add(t)})),this}},{key:\"setRequired\",value:function(t){var e=this;return t.forEach((function(t){return e.required.add(t)})),this}},{key:\"resolve\",value:function(t){var e=Object.assign(this.getDefaults(),t);return this.validate(e),e}},{key:\"getDefaults\",value:function(){var t,e={},n=r(this.defaults);try{for(n.s();!(t=n.n()).done;){var i=o(t.value,2),a=i[0],u=i[1];e[a]=u}}catch(t){n.e(t)}finally{n.f()}return e}},{key:\"validate\",value:function(t){for(var e in t){if(!this.optionExists(e))throw new Error('Unkown option \"'.concat(e,'\".'));this.checkType(e,t[e])}var n,o=r(this.required.values());try{for(o.s();!(n=o.n()).done;){var i=n.value;if(void 0===t[i])throw new Error('Option \"'.concat(i,'\" is required.'))}}catch(t){o.e(t)}finally{o.f()}}},{key:\"checkType\",value:function(t,e){if(this.types.has(t)){var r=this.types.get(t),o=n(e);if(o!==r)throw new Error('Wrong value for option \"'.concat(t,'\". Expected type \"').concat(r,'\" but got \"').concat(o,'\".'))}}},{key:\"optionExists\",value:function(t){return!!this.allowExtra||this.defaults.has(t)||this.optional.has(t)||this.required.has(t)||this.types.has(t)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();return e.default})()},162:function(t){t.exports=(()=>{\"use strict\";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>n});var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this._events={},this.on=this.addEventListener,this.off=this.removeEventListener}var e;return(e=[{key:\"emit\",value:function(t,e){if(Object.prototype.hasOwnProperty.call(this._events,t))for(var n=this._events[t],r={type:t,detail:e},o=n.length,i=0;i<o;i++)this.handle(n[i],r)}},{key:\"handle\",value:function(t,e){t(e)}},{key:\"addEventListener\",value:function(t,e){Object.prototype.hasOwnProperty.call(this._events,t)||(this._events[t]=[]),this._events[t].indexOf(e)<0&&this._events[t].push(e)}},{key:\"removeEventListener\",value:function(t,e){if(Object.prototype.hasOwnProperty.call(this._events,t)){var n=this._events[t],r=n.indexOf(e);r>=0&&n.splice(r,1),0===n.length&&delete this._events[t]}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();return e.default})()}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})};var r={};return(()=>{\"use strict\";n.r(r),n.d(r,{GamepadHandler:()=>d,GamepadListener:()=>x});var t=n(162),e=n.n(t),o=n(944),i=n.n(o);function a(t){return(a=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||\"object\"!==a(e)&&\"function\"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(d,t);var e,n,r,o,i,a=(o=d,i=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(o);if(i){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return l(this,t)});function d(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u(this,d),(n=a.call(this)).index=t,n.options=n.constructor.resolveOptions(r),n.sticks=new Array(e.axes.length/2).fill(null).map((function(){return[null,null]})),n.buttons=new Array(e.buttons.length).fill(null),n.updateStick=n.updateStick.bind(f(n)),n.updateButton=n.updateButton.bind(f(n)),n}return e=d,r=[{key:\"resolveOptions\",value:function(t){var e=void 0!==t.stick,n=void 0!==t.button,r={stick:this.optionResolver.resolve(e?t.stick:n?{}:t),button:this.optionResolver.resolve(n?t.button:e?{}:t)};return r.stick.deadZone=Math.max(Math.min(r.stick.deadZone,1),0),r.button.deadZone=Math.max(Math.min(r.button.deadZone,1),0),r.stick.precision=r.stick.precision?Math.pow(10,r.stick.precision):0,r.button.precision=r.button.precision?Math.pow(10,r.button.precision):0,r}}],(n=[{key:\"update\",value:function(t){for(var e=0,n=this.sticks.length,r=0;r<n;r++)for(var o=0;o<2;o++)this.updateStick(t,r,o,t.axes[e++]);var i=this.buttons.length;for(e=0;e<i;e++)this.updateButton(t,t.buttons[e],e)}},{key:\"updateStick\",value:function(t,e,n,r){var o=this.options.stick,i=o.deadZone,a=o.analog,u=o.precision;i&&r<i&&r>-i&&(r=0),a?u&&(r=Math.round(r*u)/u):r=r>0?1:r<0?-1:0,this.sticks[e][n]!==r&&(this.sticks[e][n]=r,this.emit(\"axis\",{gamepad:t,stick:e,axis:n,value:r,index:this.index}))}},{key:\"updateButton\",value:function(t,e,n){var r=this.options.button,o=r.deadZone,i=r.analog,a=r.precision,u=e.value,s=e.pressed,c=u;o&&e.value<o&&e.value>-o&&(c=0),i?a&&(c=Math.round(c*a)/a):c=s?1:0,this.buttons[n]!==c&&(this.buttons[n]=c,this.emit(\"button\",{gamepad:t,button:n,pressed:s,value:c,index:this.index}))}}])&&s(e.prototype,n),r&&s(e,r),d}(e());function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}d.optionResolver=(new(i())).setDefaults({analog:!0,deadZone:0,precision:0}).setTypes({analog:\"boolean\",deadZone:\"number\",precision:\"number\"});var y=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.callback=e,this.frame=null,this.update=this.update.bind(this)}var e,n;return e=t,(n=[{key:\"setCallback\",value:function(t){this.callback=t}},{key:\"start\",value:function(){this.frame||(this.frame=window.requestAnimationFrame(this.update))}},{key:\"stop\",value:function(){this.frame&&(window.cancelAnimationFrame(this.frame),this.frame=null)}},{key:\"update\",value:function(){this.frame=window.requestAnimationFrame(this.update),this.callback()}}])&&h(e.prototype,n),t}();function v(t){return(v=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function b(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t,e){return!e||\"object\"!==v(e)&&\"function\"!=typeof e?k(t):e}function k(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x=function(t){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=O(r);if(o){var n=O(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return w(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(b(this,a),t=i.call(this),\"function\"!=typeof navigator.getGamepads)throw new Error(\"This browser does not support gamepad API.\");return t.options=e,t.onAxis=t.onAxis.bind(k(t)),t.update=t.update.bind(k(t)),t.start=t.start.bind(k(t)),t.stop=t.stop.bind(k(t)),t.discover=t.discover.bind(k(t)),t.onButton=t.onButton.bind(k(t)),t.handlers=new Array(4).fill(null),t.loop=new y(t.update),window.addEventListener(\"error\",t.stop),t}return e=a,(n=[{key:\"start\",value:function(){this.loop.start()}},{key:\"stop\",value:function(){this.loop.stop()}},{key:\"update\",value:function(){var t=navigator.getGamepads();this.discover(t[0],0),this.discover(t[1],1),this.discover(t[2],2),this.discover(t[3],3)}},{key:\"discover\",value:function(t,e){t?(this.handlers[e]||this.registerHandler(e,t),this.handlers[e].update(t)):this.handlers[e]&&this.removeGamepad(e)}},{key:\"registerHandler\",value:function(t,e){if(this.handlers[t])throw new Error(\"Gamepad #\".concat(t,\" is already registered.\"));var n=new d(t,e,this.options);this.handlers[t]=n,n.addEventListener(\"axis\",this.onAxis),n.addEventListener(\"button\",this.onButton),this.emit(\"gamepad:connected\",{index:t,gamepad:e}),this.emit(\"gamepad:\".concat(t,\":connected\"),{index:t,gamepad:e})}},{key:\"removeGamepad\",value:function(t){if(!this.handlers[t])throw new Error(\"Gamepad #\".concat(t,\" is not registered.\"));this.handlers[t].removeEventListener(\"axis\",this.onAxis),this.handlers[t].removeEventListener(\"button\",this.onButton),this.handlers[t]=null,this.emit(\"gamepad:disconnected\",{index:t}),this.emit(\"gamepad:\".concat(t,\":disconnected\"),{index:t})}},{key:\"onAxis\",value:function(t){var e=t.detail.index;this.emit(\"gamepad:axis\",t.detail),this.emit(\"gamepad:\".concat(e,\":axis\"),t.detail),this.emit(\"gamepad:\".concat(e,\":axis:\").concat(t.detail.axis),t.detail)}},{key:\"onButton\",value:function(t){var e=t.detail.index;this.emit(\"gamepad:button\",t.detail),this.emit(\"gamepad:\".concat(e,\":button\"),t.detail),this.emit(\"gamepad:\".concat(e,\":button:\").concat(t.detail.button),t.detail)}}])&&m(e.prototype,n),a}(e())})(),r})()}));","// extracted by mini-css-extract-plugin\nexport {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import css from \"./game/game-style.css\";\nimport Player from \"./game/Player.js\";\nimport HumanInput from \"./game/HumanInput.js\";\nimport NullInput from \"./game/NullInput\";\nimport AI from \"./game/AI\";\nimport Ball from \"./game/Ball.js\";\nimport { CheckCollisions } from \"./game/Collisions.js\";\n\nconst NR_BALLS = 1;\nconst BALLS_COLORS = [ 'orange', 'lightgreen', 'lightblue' ];\n\nwindow.addEventListener('DOMContentLoaded', () => {\n\n\tconst SCR = {\n\t\tw: 0,\n\t\th: 0,\n\t\tratio: 0.4,\n\t\tcontainer_el: null,\n\t\tcanvas_el: null,\n\t\tctx: null,\n\t\tctx_bg: null\n\t};\n\n\tlet prev_timestamp = 0;\n\tlet dt = 0;\n\tlet et = 0;\n\tlet spritesheet = null;\n\tlet bg_bitmap = null;\n\tlet sprites = {};\n\tlet start = 0;\n\tlet balls = [];\n\tlet players = [];\n\tlet goals = {};\n\tlet ai, ai2 = null;\n\tlet players_count = 0;\n\n\tconst LoadSpritesheet = async ( spritesheet_file ) => {\n\t\treturn new Promise( resolve => {\n\t\t\tconst img = new Image();\n\t\t\timg.onload = () => { resolve( img ); };\n\t\t\timg.src = spritesheet_file;\n\t\t}, reject => {\n\t\t\tconsole.log('AHH.. Spritesheet not loaded!');\n\t\t\tconsole.log( reject );\n\t\t});\n\t}\n\n\tconst CreateCanvas = () => {\n\t\tSCR.w = 640;\n\t\tSCR.h = 288;\n\n\t\tSCR.container_el = document.querySelector('.shpong-game-container');\n\t\tSCR.canvas_el = document.createElement( 'canvas' );\n\t\tSCR.canvas_el.setAttribute( 'id', \"shpong-game-canvas\");\n\t\tSCR.container_el.appendChild( SCR.canvas_el );\n\n\t\tSCR.canvas_el.setAttribute('width', SCR.w );\n\t\tSCR.canvas_el.setAttribute('height', SCR.h );\n\t\tSCR.ctx = SCR.canvas_el.getContext(\"2d\" );\n\n\t\tSCR.canvas_bg_el = document.createElement( 'canvas' );\n\t\tSCR.canvas_bg_el.setAttribute('width', SCR.w );\n\t\tSCR.canvas_bg_el.setAttribute('height', SCR.h );\n\t\tSCR.ctx_bg = SCR.canvas_bg_el.getContext( '2d' );\n\t}\n\n\tconst AddGoals = () => {\n\t\tgoals.top = { x: 0, y: 0, xx: SCR.w - 1, yy: 0 };\n\t\tgoals.bottom = { x: 0, y: SCR.h - 1, xx: SCR.w - 1, yy: SCR.h - 1};\n\t\tgoals.left = { x: 0, y: 0, xx: 0, yy: SCR.h - 1 };\n\t\tgoals.right = { x: SCR.w - 1, y: 0, xx: SCR.w - 1, yy: SCR.h - 1 };\n\t}\n\n\tconst GetPlayerSpeed = ( slower = false ) => {\n\t\tif ( slower ) {\n\t\t\treturn Math.round( SCR.w / 3 ) - Math.round(SCR.w / 15 );\n\t\t}\n\t\treturn Math.round( SCR.w / 3 );\n\t}\n\n\tconst GetBallSpeed = () => {\n\t\treturn Math.round( SCR.h / 1.5 );\n\t}\n\n\tconst GetPlayerSize = () => {\n\t\treturn {\n\t\t\tw: Math.round( SCR.w / 8 ),\n\t\t\th: Math.max( Math.round( SCR.h / 16 ), 16)\n\t\t}\n\t}\n\n\tconst GetPlayerSprite = ( idx ) => {\n\t\tif (idx == 0) {\n\t\t\treturn sprites.player;\n\t\t}\n\t\treturn sprites.player_top;\n\t}\n\n\tconst GetBallSize = () => {\n\t\treturn {\n\t\t\tw: Math.round( SCR.w / 48 ),\n\t\t\th: Math.round( SCR.w / 48 ),\n\t\t}\n\t}\n\n\tconst AddBalls = () => {\n\t\tfor ( let i = 0; i < NR_BALLS; i++ ) {\n\t\t\tballs.push( new Ball( SCR, BALLS_COLORS[i], GetBallSize(), GetBallSpeed(), sprites.ball, goals ) );\n\t\t}\n\t}\n\n\tconst AddPlayers = () => {\n\t\tplayers.push( new Player(\n\t\t\t\"Greg\",\n\t\t\t\"purple\",\n\t\t\tSCR,\n\t\t\t\"bottom\",\n\t\t\tnew HumanInput( 'joypad' ),\n\t\t\tGetPlayerSize(),\n\t\t\tGetPlayerSpeed(),\n\t\t\tGetPlayerSprite( players.length )\n\t\t));\n\n\t\tplayers.push( new Player(\n\t\t\t\"WP Shpong\",\n\t\t\t\"gray\",\n\t\t\tSCR,\n\t\t\t\"top\",\n\t\t\tnew NullInput(),\n\t\t\tGetPlayerSize(),\n\t\t\tGetPlayerSpeed( true ),\n\t\t\tGetPlayerSprite( players.length )\n\t\t));\n\n\t\tplayers_count = players.length;\n\t}\n\n\tconst Loop = ( timestamp ) => {\n\t\twindow.requestAnimationFrame(Loop);\n\t\tSetTimeStamps( timestamp );\n\t\tai.Work( dt, et );\n\t\t// ai2.Work( dt, et );\n\t\tHandlePlayersInputs( dt, et );\n\t\tUpdate( dt, et );\n\t\tActOnCollisions( dt, et );\n\t\tDraw();\n\t};\n\n\tconst SetTimeStamps = (timestamp) => {\n\t\tdt = (timestamp - prev_timestamp) / 1000;\n\t\tprev_timestamp = timestamp;\n\t\tet = timestamp - start;\n\t};\n\n\tconst HandlePlayersInputs = () => {\n\t\tfor ( let i = 0; i < players_count; i++ ) {\n\t\t\tplayers[i].HandleInput();\n\t\t}\n\t};\n\n\tconst Update = ( dt, et ) => {\n\t\tfor ( let i = 0; i < players_count; i++ ) {\n\t\t\tplayers[i].Update( dt, et );\n\t\t}\n\n\t\tfor ( let i = 0; i < NR_BALLS; i++ ) {\n\t\t\tballs[i].Update( dt, et );\n\t\t}\n\t};\n\n\tconst ActOnCollisions = ( dt, et ) => {\n\t\tfor ( let i = 0; i < NR_BALLS; i++ ) {\n\t\t\tCheckCollisions( balls[i], players, SCR, dt );\n\t\t}\n\t}\n\n\tconst CreateBgBitmap = async () => {\n\n\t\tfor ( let j = 1; j < SCR.h / 16 - 1; j++ ) {\n\t\t\tfor ( let i = 1; i < SCR.w / 16 - 1; i++ ) {\n\t\t\t\tSCR.ctx_bg.drawImage( sprites.grass1.bitmap, i * 16, j * 16, 16, 16 );\n\n\t\t\t\tif ( i > 1 && i < SCR.w / 16 - 2 && j > 1 && j < SCR.h / 16 - 2 ) {\n\t\t\t\t\tconst should = Math.floor( Math.random() * 100 );\n\t\t\t\t\tif ( should < 4 || should > 96 ) {\n\t\t\t\t\t\tconst idx = Math.floor( Math.random() * sprites.bushes.length );\n\t\t\t\t\t\tSCR.ctx_bg.drawImage( (sprites.bushes[ idx ]).bitmap, i * 16, j * 16, 16, 16 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tSCR.ctx_bg.drawImage( sprites.grass_wall_tl.bitmap, 0, 0, 16, 16 );\n\t\tSCR.ctx_bg.drawImage( sprites.grass_wall_tr.bitmap, SCR.w - 16 - 1, 0, 16, 16 );\n\t\tSCR.ctx_bg.drawImage( sprites.grass_wall_bl.bitmap, 0, SCR.h - 16 - 1, 16, 16 );\n\t\tSCR.ctx_bg.drawImage( sprites.grass_wall_br.bitmap, SCR.w - 16 - 1, SCR.h - 16 - 1, 16, 16 );\n\n\t\tfor ( let i = 0; i < ( SCR.w / 16 ) - 2; i++ ) {\n\t\t\tSCR.ctx_bg.drawImage( sprites.grass_wall_t.bitmap, (i + 1)  * 16, 0, 16, 16 );\n\t\t\tSCR.ctx_bg.drawImage( sprites.grass_wall_b.bitmap, (i + 1)  * 16, SCR.h - 16 - 1, 16, 16 );\n\t\t}\n\t\tfor ( let j = 0; j < ( SCR.h / 16 ) - 2; j ++ ) {\n\t\t\tSCR.ctx_bg.drawImage( sprites.grass_wall_ml.bitmap, 0, (j + 1)  * 16, 16, 16 );\n\t\t\tSCR.ctx_bg.drawImage( sprites.grass_wall_mr.bitmap, SCR.w - 16 - 1, (j + 1)  * 16, 16, 16 );\n\t\t}\n\n\t\tbg_bitmap = await createImageBitmap( SCR.canvas_bg_el );\n\n\t}\n\n\tconst DrawPoints = () => {\n\n\t\tSCR.ctx.save();\n\t\tSCR.ctx.fillStyle = 'white';\n\t\tSCR.ctx.font = '6px \"Press Start 2P\"';\n\t\tSCR.ctx.fillText(players[0].name.toUpperCase() + ': ' + players[0].points, 20 , 28);\n\t\tSCR.ctx.fillText(players[1].name.toUpperCase() + ': ' + players[1].points, 20 , 38);\n\t\tSCR.ctx.restore();\n\t}\n\n\tconst DrawBg = () => {\n\t\tSCR.ctx.drawImage( bg_bitmap, 0, 0, SCR.w, SCR.h );\n\t}\n\n\tconst Draw = () => {\n\t\tSCR.ctx.clearRect(0, 0, SCR.w, SCR.h );\n\t\tDrawBg();\n\n\t\tfor (let i = 0;i < NR_BALLS; i++) {\n\t\t\tballs[i].Draw();\n\t\t}\n\n\t\tfor ( let i = 0; i < players_count; i++ ) {\n\t\t\tplayers[i].Draw();\n\t\t}\n\n\t\tDrawPoints();\n\t};\n\n\tconst SetupAI = () => {\n\t\tai = new AI( players[1], balls, goals );\n\t\t// ai2 = new AI( players[0], balls, goals );\n\t}\n\n\tconst CreateSprite = async ( x, y, w, h, repetition = 'repeat' ) => {\n\t\tconst tile_size = 16;\n\t\tconst xx = x * tile_size;\n\t\tconst yy = y * tile_size;\n\n\t\tconst bitmap = await createImageBitmap( spritesheet, xx, yy, w, h );\n\n\t\treturn {\n\t\t\tbitmap: bitmap,\n\t\t\tpattern: SCR.ctx.createPattern( bitmap, repetition )\n\t\t}\n\t}\n\n\tconst SetupSprites = async () => {\n\t\t// sprites.grass1 = await CreateSprite(8, 2, 16, 16);\n\t\tsprites.grass1 = await CreateSprite(8, 2, 16, 16);\n\n\t\tconst x_start = 19;\n\t\tconst y_start = 0;\n\n\t\tsprites.grass_wall_tl = await CreateSprite(x_start, y_start, 16, 16);\n\t\tsprites.grass_wall_t = await CreateSprite(x_start + 1, y_start, 16, 16);\n\t\tsprites.grass_wall_tr = await CreateSprite(x_start + 2, y_start, 16, 16);\n\n\t\tsprites.grass_wall_ml = await CreateSprite(x_start, y_start + 1, 16, 16);\n\t\tsprites.grass_wall_m = await CreateSprite(x_start + 1, y_start + 1, 16, 16);\n\t\tsprites.grass_wall_mr = await CreateSprite(x_start + 2, y_start + 1, 16, 16);\n\n\t\tsprites.grass_wall_bl = await CreateSprite(x_start, y_start + 2, 16, 16);\n\t\tsprites.grass_wall_b = await CreateSprite(x_start + 1, y_start + 2, 16, 16);\n\t\tsprites.grass_wall_br = await CreateSprite(x_start + 2, y_start + 2, 16, 16);\n\n\t\tsprites.bushes = [];\n\t\tsprites.bushes.push( await CreateSprite(10, 11, 16, 16) );\n\t\tsprites.bushes.push( await CreateSprite(11, 11, 16, 16) );\n\t\tsprites.bushes.push( await CreateSprite(12, 11, 16, 16) );\n\t\tsprites.bushes.push( await CreateSprite(13, 11, 16, 16) );\n\t\tsprites.bushes.push( await CreateSprite(13, 13, 16, 16) );\n\t\tsprites.bushes.push( await CreateSprite(12, 13, 16, 16) );\n\n\t\tsprites.ball = await CreateSprite(5, 4, 16, 16);\n\n\t\tsprites.player_top = await CreateSprite(10, 4, 16*3, 16);\n\t\tsprites.player = await CreateSprite(10, 6, 16*3, 16);\n\t}\n\n\tconst pong = async () => {\n\t\tCreateCanvas();\n\t\tspritesheet = await LoadSpritesheet( `${wp_shpong.assets_dir}/GRASS.png` );\n\t\tawait SetupSprites();\n\t\tawait CreateBgBitmap();\n\t\tAddGoals();\n\t\tAddPlayers();\n\t\tAddBalls();\n\t\tSetupAI();\n\t\tLoop( 0 );\n\t};\n\n\tpong();\n});\n\n\n\n\n"],"names":["GetAngleBallToPlayer","AI","constructor","player_ref","balls","goals","active","current_target","current_target_distance","current_target_angle","wanted_velocity","projected_fall_coords","x","y","Activate","Deactivate","Toggle","Work","dt","et","FindNearestTarget","SetControlsToTarget","Math","cos","abs","sign","input","UnsetRight","SetLeft","UnsetLeft","SetRight","length","target_index","ball_from_center","i","dist","GetBallDistance","intersect","IsBallIntersectingTopWall","intersects","SetDebug","velocity","scr","h","position","MaybeChangeTarget","SetTargetToNone","ball","sqrt","pow","center","wall","x1","y1","x2","y2","x3","size","w","y3","x4","y4","denom","t","u","GetPointAngleToScreenCenter","Ball","screen","color","move_speed","sprite","shadow_center","CalcPosition","bind","SetInitialPosition","SetInitialVelocity","GetRandomVelocity","min","max","random","Update","UpdateCenter","angle_ball_to_center","sin","Draw","ctx","save","beginPath","arc","PI","fillStyle","fill","closePath","pattern","restore","Deg2Rad","degrees","Rad2Deg","rad","atan2","player","CheckCollisionWalls","CheckCollisionOut","players","AddPoint","CheckCollisionPlayerTop","DidHitThePlayerTop","angle_part","player_velocity_part","CheckCollisionPlayerBottom","DidHitThePlayerBottom","angle_part_x","CheckCollisionPlayers","forEach","position_name","WillBallCollideWithWall","collision","CheckCollisions","GamepadListener","DEFAULT_GAMEPAD_MAPPING","Map","set","HumanInput","controller","perf","window","performance","joypad","keys","left","pressed","time","right","HandleJoyPadEvent","AttachMove","AttachKeyBoardControls","AttachJoypadControls","analog","start","on","e","detail","button","get","document","addEventListener","code","now","PressingLeft","PressingRight","NullInput","Player","name","position_sign","points","debug","paddle_shift_y","drawImage","bitmap","console","log","HandleInput","pos","css","NR_BALLS","BALLS_COLORS","SCR","ratio","container_el","canvas_el","ctx_bg","prev_timestamp","spritesheet","bg_bitmap","sprites","ai","ai2","players_count","LoadSpritesheet","spritesheet_file","Promise","resolve","img","Image","onload","src","reject","CreateCanvas","querySelector","createElement","setAttribute","appendChild","getContext","canvas_bg_el","AddGoals","top","xx","yy","bottom","GetPlayerSpeed","slower","round","GetBallSpeed","GetPlayerSize","GetPlayerSprite","idx","player_top","GetBallSize","AddBalls","push","AddPlayers","Loop","timestamp","requestAnimationFrame","SetTimeStamps","HandlePlayersInputs","ActOnCollisions","CreateBgBitmap","j","grass1","should","floor","bushes","grass_wall_tl","grass_wall_tr","grass_wall_bl","grass_wall_br","grass_wall_t","grass_wall_b","grass_wall_ml","grass_wall_mr","createImageBitmap","DrawPoints","font","fillText","toUpperCase","DrawBg","clearRect","SetupAI","CreateSprite","repetition","tile_size","createPattern","SetupSprites","x_start","y_start","grass_wall_m","pong","wp_shpong","assets_dir"],"sourceRoot":""}